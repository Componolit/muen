\section{Future work}
The following list gives a somewhat ordered overview of possible future
enhancements to the Muen separation kernel:

\begin{itemize}
	\item Covert/Side-Channel analysis
	\item Cache coloring
	\item Linux virtualization
	\item Hardware passthrough/PCIe virtualization
	\item Dynamic resource management
	\item Multicore subjects
	\item Performance optimization
	\item Power Management
	\item Formal verification
	\item Fully virtualized subjects/Windows virtualization
\end{itemize}

The following sections describe some of the more interesting items.

\subsection{Covert/Side-channel analysis}
Since the main purpose of a separation kernel is the isolation of subjects, any
unintended channel that enables information flow must be prohibited or at least
reduced to an acceptable data rate.

The first step in preventing such flows is to identify potential covert and
side-channels in the kernel. This includes a systematic and thorough analysis of
the underlying hardware platform. Special care must be taken to evaluate the
interaction of the kernel with the hardware since minor differences in
interpretation of the specification can lead to unintended side-effects. A very
deep knowledge and understanding of the Intel x86 architecture is required for
such an analysis.
TODO:Ref

\subsubsection{Cache coloring}
A well-known source of high-bandwith side-channels are processor caches. One
method to prevent this channel is called \emph{cache coloring}. The main concept
is to partition the cache into disjoint groups and assigning a color to each of
the groups. TODO:Cache coloring ref

In a second step each subject is associated with a color. All subjects of a
given color share the same cache partition. In turn subjects of differing color
have no access to the same cache locations, which means the cache cannot be used
as a side-channel.

This mechanism could be implemented by extending the policy compilation tool
without changes to the kernel.

\subsection{Linux subject}
Porting the Linux kernel to run as a subject on the Muen separation kernel would
enable the execution of a large number of Linux user-space applications. This
would drastically increase the number of real world use-cases, that a system
using the Muen kernel could be applied to.

Leveraging the VM profile, which allows a subject to perform memory management
via EPT (see section \ref{subsubsec:ept}), reduces the porting effort. Changes
to the Linux boot process are needed, since it is quite involved. The Linux
kernel implements an architecture-dependent boot protocol that is documented in
TODO:Ref.

Combined with the \emph{hardware passthrough} enhancement, Linux could be used
to control virtually any PCI(e) device. This would add the abundant hardware
support of the Linux kernel to systems based on the separation kernel, with a
comparably small increase in kernel complexity.

\subsection{Hardware pass-through/PCIe virtualization}
Even though the separation kernel has support for resources, that can be
accessed using port and memory-mapped I/O, newer hardware devices are attached
to a PCI bus. Prior to their usage, such devices must be configured using a
mechanism called the PCI configuration space. Since this ressource allows to
(re-)configure PCI devices, the kernel must be in charge of device management
like initial setup.

Subjects performing device enumeration to discover the PCI topology would need
a virtualized view of the PCI bus or be altered to not perform disallowed access
to the PCI configuration space.

Additional measures need to be implemented to enable subject assignment and safe
usage of PCI devices. Most PCI devices support Direct Memory Access (DMA), which
allows them to directly access all data in physical memory. Secondly, a PCI
device is not restricted to a specific hardware interrupt but can be instructed
to trigger any interrupt. Intel's VT-d technology, as briefly mentioned in
section \ref{subsubsec:vtd}, provides mechanisms to implement the necessary
isolation functions.

Implementing these enhancements using VT-d should keep the kernel complexity at
an acceptable level.

\subsection{Dynamic resource management}
Currently, resource management is static and there is little flexibility. All
system parameters must be explicitly declared in the policy. Switching between
pre-defined scheduling plans is the only property changeable at runtime. While
this allows to tightly control and validate a system via the policy, all
assigned resources are indispensable even though some of them may not be in use
during a particular period.

For example, a system consisting of multiple different VM subjects with their
respective operating systems need multiple gigabytes of memory when running.
In a static system configuration, all the assigned memory is committed and
reserved even though only one of the VMs might be in active use. A system that
would allow dynamic launching and stopping of subjects, only the resources of
the effectively running subjects would be in use.

This can be achieved by extending the trusted subject $\tau$0. It has the same
trust-level as the kernel and forms part of the TCB. Via an appropriate
interface it can update parts of the policy and instruct the kernel to perform
the necessary actions to enforce the changes.

\subsection{Formal verification}
By implementing the kernel in SPARK and proving the absence of runtime errors,
we have shown that the kernel is free from exceptions. While these proofs
provide some evidence to the correctness claim of the implementation, the
application of these particular formal methods do not provide any assurances
beyond the error free execution of the kernel. Proving functional properties
such as the correspondence of the scheduler to a given formal specification is
necessary to further raise the confidence in systems based on the Muen kernel.

A link between the SPARK tool suite and the interactive proof assistant
Isabelle/HOL exists in the form of the \emph{HOL-SPARK} verification
environment \cite{berghofer:OASIcs:2012:3587}. Isabelle would allow to prove
the formal correctness of the Muen separation kernel. The viability of this
approach has been demonstrated by the seL4 project \cite{Klein_EHACDEEKNSTW_09}.
